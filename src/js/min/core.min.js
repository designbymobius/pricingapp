(function(){var a,b,c,d,e,f,g;d=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],f.push(null==a[d]&&"function"!=typeof e?a[d]=e:void 0)}catch(g){c=g}return f},a={},null==a.options&&(a.options={}),c={checks:{xhr:{url:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())}},image:{url:function(){return"http://dqakt69vkj09v.cloudfront.net/are-we-online.gif?_="+Math.floor(1e9*Math.random())}},active:"image"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},e=function(a,b){var c,d,e,f,g,h;for(c=a,f=b.split("."),d=g=0,h=f.length;h>g&&(e=f[d],c=c[e],"object"==typeof c);d=++g);return d===f.length-1?c:void 0},a.getOption=function(b){var d,f;return d=null!=(f=e(a.options,b))?f:e(c,b),"function"==typeof d?d():d},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(a.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){return a.trigger("confirmed-up"),"up"!==a.state?(a.state="up",a.trigger("up")):void 0},a.markDown=function(){return a.trigger("confirmed-down"),"down"!==a.state?(a.state="down",a.trigger("down")):void 0},f={},a.on=function(b,c,d){var e,g,h,i,j;if(g=b.split(" "),g.length>1){for(j=[],h=0,i=g.length;i>h;h++)e=g[h],j.push(a.on(e,c,d));return j}return null==f[b]&&(f[b]=[]),f[b].push([d,c])},a.off=function(a,b){var c,d,e,g,h;if(null!=f[a]){if(b){for(d=0,h=[];d<f[a].length;)g=f[a][d],c=g[0],e=g[1],h.push(e===b?f[a].splice(d,1):d++);return h}return f[a]=[]}},a.trigger=function(a){var b,c,d,e,g,h,i;if(null!=f[a]){for(g=f[a],i=[],d=0,e=g.length;e>d;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i}},b=function(a,b,c){var d,e;return d=function(){return a.status&&a.status<12e3?b():c()},null===a.onprogress?(a.addEventListener("error",c,!1),a.addEventListener("timeout",c,!1),a.addEventListener("load",d,!1)):(e=a.onreadystatechange,a.onreadystatechange=function(){return 4===a.readyState?d():0===a.readyState&&c(),"function"==typeof e?e.apply(null,arguments):void 0})},a.checks={},a.checks.xhr=function(){var c,d;d=new XMLHttpRequest,d.offline=!1,d.open("HEAD",a.getOption("checks.xhr.url"),!0),b(d,a.markUp,a.markDown);try{d.send()}catch(e){c=e,a.markDown()}return d},a.checks.image=function(){var b;return b=document.createElement("img"),b.onerror=a.markDown,b.onload=a.markUp,void(b.src=a.getOption("checks.image.url"))},a.check=function(){return a.trigger("checking"),a.checks[a.getOption("checks.active")]()},a.confirmUp=a.confirmDown=a.check,a.onXHR=function(a){var b,c,e;return b=function(b,c){var d;return d=b.open,b.open=function(e,f,g,h,i){return a({type:e,url:f,async:g,flags:c,user:h,password:i,xhr:b}),d.apply(b,arguments)}},e=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var c,d,f;return c=new e(a),b(c,a),f=c.setRequestHeader,c.headers={},c.setRequestHeader=function(a,b){return c.headers[a]=b,f.call(c,a,b)},d=c.overrideMimeType,c.overrideMimeType=function(a){return c.mimeType=a,d.call(c,a)},c},d(window.XMLHttpRequest,e),null!=window.XDomainRequest?(c=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new c,b(a),a},d(window.XDomainRequest,c)):void 0},g=function(){return a.getOption("interceptRequests")&&a.onXHR(function(c){var d;return d=c.xhr,d.offline!==!1?b(d,a.confirmUp,a.confirmDown):void 0}),a.getOption("checkOnLoad")?a.check():void 0},setTimeout(g,0),window.Offline=a}).call(this),function(){var a,b,c,d,e,f,g,h,i;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");d=Offline.reconnect={},f=null,e=function(){var a;return null!=d.state&&"inactive"!==d.state&&Offline.trigger("reconnect:stopped"),d.state="inactive",d.remaining=d.delay=null!=(a=Offline.getOption("reconnect.initialDelay"))?a:3},b=function(){var a,b;return a=null!=(b=Offline.getOption("reconnect.delay"))?b:Math.min(Math.ceil(1.5*d.delay),3600),d.remaining=d.delay=a},g=function(){return"connecting"!==d.state?(d.remaining-=1,Offline.trigger("reconnect:tick"),0===d.remaining?h():void 0):void 0},h=function(){return"waiting"===d.state?(Offline.trigger("reconnect:connecting"),d.state="connecting",Offline.check()):void 0},a=function(){return Offline.getOption("reconnect")?(e(),d.state="waiting",Offline.trigger("reconnect:started"),f=setInterval(g,1e3)):void 0},i=function(){return null!=f&&clearInterval(f),e()},c=function(){return Offline.getOption("reconnect")?"connecting"===d.state?(Offline.trigger("reconnect:failure"),d.state="waiting",b()):void 0:void 0},d.tryNow=h,e(),Offline.on("down",a),Offline.on("confirmed-down",c),Offline.on("up",i)}.call(this),function(){var a,b,c,d,e,f;if(!window.Offline)throw new Error("Requests module brought in without offline.js");c=[],f=!1,d=function(a){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(f=!0),c.push(a)},e=function(a){var b,c,d,e,f,g,h,i,j;i=a.xhr,f=a.url,e=a.type,g=a.user,d=a.password,b=a.body,i.abort(),i.open(e,f,!0,g,d),j=i.headers;for(c in j)h=j[c],i.setRequestHeader(c,h);return i.mimeType&&i.overrideMimeType(i.mimeType),i.send(b)},a=function(){return c=[]},b=function(){var b,d,f,g,h,i;for(Offline.trigger("requests:flush"),f={},h=0,i=c.length;i>h;h++)d=c[h],g=d.url.replace(/(\?|&)_=[0-9]+/,function(a,b){return"?"===b?b:""}),f[""+d.type.toUpperCase()+" - "+g]=d;for(b in f)d=f[b],e(d);return a()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return f?(f=!1,a()):void 0}),Offline.on("up",b),Offline.on("down",function(){return f=!1}),Offline.onXHR(function(a){var b,c,e,f,g;return e=a.xhr,b=a.async,e.offline!==!1&&(c=function(){return d(a)},g=e.send,e.send=function(b){return a.body=b,g.apply(e,arguments)},b)?null===e.onprogress?(e.addEventListener("error",c,!1),e.addEventListener("timeout",c,!1)):(f=e.onreadystatechange,e.onreadystatechange=function(){return 0===e.readyState?c():4===e.readyState&&(0===e.status||e.status>=12e3)&&c(),"function"==typeof f?f.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:b,clear:a}):void 0},0)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");b='<div class="offline-ui"><div class="offline-ui-content"></div></div>',a='<a href class="offline-ui-retry"></a>',e=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},f=d=null,c=function(a){return k(a),f.className+=" "+a},k=function(a){return f.className=f.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ")},h={},g=function(a,b){return c(a),null!=h[a]&&clearTimeout(h[a]),h[a]=setTimeout(function(){return k(a),delete h[a]},1e3*b)},i=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=!1),0===a)return"now";c={d:86400,h:3600,m:60,s:1},d={s:"second",m:"minute",h:"hour",d:"day"},f="";for(g in c)if(e=c[g],a>=e)return h=Math.floor(a/e),b&&(g=" "+d[g],1!==h&&(g+="s")),""+h+g},l=function(){var g,h;return f=e(b),document.body.appendChild(f),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(f.appendChild(e(a)),g=f.querySelector(".offline-ui-retry"),h=function(a){return a.preventDefault(),Offline.reconnect.tryNow()},null!=g.addEventListener?g.addEventListener("click",h,!1):g.attachEvent("click",h)),c("offline-ui-"+Offline.state),d=f.querySelector(".offline-ui-content")},j=function(){return l(),Offline.on("up",function(){return k("offline-ui-down"),c("offline-ui-up"),g("offline-ui-up-2s",2),g("offline-ui-up-5s",5)}),Offline.on("down",function(){return k("offline-ui-up"),c("offline-ui-down"),g("offline-ui-down-2s",2),g("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return c("offline-ui-connecting"),k("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){return c("offline-ui-waiting"),k("offline-ui-connecting"),d.setAttribute("data-retry-in-seconds",Offline.reconnect.remaining),d.setAttribute("data-retry-in-abbr",i(Offline.reconnect.remaining)),d.setAttribute("data-retry-in",i(Offline.reconnect.remaining,!0))}),Offline.on("reconnect:stopped",function(){return k("offline-ui-connecting offline-ui-waiting"),d.setAttribute("data-retry-in-seconds",null),d.setAttribute("data-retry-in-abbr",null),d.setAttribute("data-retry-in",null)}),Offline.on("reconnect:failure",function(){return g("offline-ui-reconnect-failed-2s",2),g("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return g("offline-ui-reconnect-succeeded-2s",2),g("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?j():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",j,!1):(m=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&j(),"function"==typeof m?m.apply(null,arguments):void 0})}.call(this),function(a){a={},a.notification=a.notification||{},a.settings={},a.settings.consoleLog=!1,a.notification.subscribers=[],a.notification.log=[],a.notification.subscribe=function(b,c,d,e){a.notification.subscribers[b]||(a.notification.subscribers[b]={});var f=a.notification.subscribers[b];f[c]={},f[c].response=d,f[c].responseParams=e||null,a.notification.log.push({type:"subscribe",notification:b,subscriber:c})},a.notification.unsubscribe=function(b,c){a.notification.subscribers[b]&&a.notification.subscribers[b][c]&&(delete a.notification.subscribers[b][c],a.notification.log.push({type:"unsubscribe",notification:b,unsubscriber:c}))},a.notification.publish=function(b,c,d){if(a.notification.subscribers[b]){d=d||"unidentified";var e=a.notification.subscribers[b],f=[];for(var g in e){var h={};h.notificationParams=c||null,h.responseParams=a.notification.subscribers[b][g].responseParams||null,setTimeout(function(a,b){return function(){e[a].response(b)}}(g,h),0),f.push(g)}a.notification.log.push({type:"publish",notification:b,informedSubscribers:f,publisher:d}),a.settings.consoleLog!==!1&&(console.log("\n Published: "+b+"\n Publisher: "+d+"\n Informed: "+JSON.stringify(f)),console.log("----------------------\n"))}},window.dxmPubSub=a.notification,window.dxmPubSub.consoleLogOn=function(){a.settings.consoleLog=!0},window.dxmPubSub.consoleLogOff=function(){a.settings.consoleLog=!1}}(),function(){function a(){var a=u();p(),i(),h(),g(),w(),v(),x(),"up"===a?N("network-up",null,this):N("network-down",null,this),f(),l(T)}function b(a){function b(){window.removeEventListener("keydown",c),d.removeEventListener("click",m)}function c(a){13===a.keyCode&&m()}var d=a.getElementsByClassName("btn")[0];P("teardown-screen","landing",b),window.addEventListener("keydown",c),d.addEventListener("click",m)}function c(){function a(){n("add-product"),m(),G(),P("task-ended","task-teardown",function(){o("add-product"),l(U.length-1)})}function b(){c.removeEventListener("click",a)}var c=document.getElementById("start-add-product");P("teardown-screen","tasks",b),c.addEventListener("click",a)}function d(a){function b(){for(var a=0,b=e.length,c=b-1;c>=0;c--)e[c].value||(a+=1,D(e[c],"attention"),e[c].addEventListener("keydown",d));1>a&&(H=f.value,I=g.value,m())}function c(){for(var a=e.length,c=a-1;c>=0;c--)e[c].value="",C(e[c],"attention")&&E(e[c],"attention");h.removeEventListener("click",b)}function d(a){a.target.value&&(E(a.target,"attention"),a.target.removeEventListener("keydown",d))}var e=a.getElementsByTagName("input"),f=a.getElementsByClassName("product-name")[0],g=a.getElementsByClassName("manufacturer-name")[0],h=a.getElementsByClassName("btn")[0];h.addEventListener("click",b),P("teardown-screen","add-product-metadata",c),P("task-ended","reset-new-product-values",function(){H=null,I=null,J=null})}function e(a){function b(){var a,b={};b.name=encodeURIComponent(H),b.manufacturer=encodeURIComponent(I),F("add-product.php","product="+JSON.stringify(b)),a=confirm("Done! Add Another Product?"),N("task-ended","add-product-btn"),setTimeout(function(){var b=a;return function(){b===!0&&(n("add-product"),G(),m())}}(),100)}for(var c=a.getElementsByClassName("manufacturer-name"),d=a.getElementsByClassName("product-name"),e=document.getElementById("submit-add-product"),f=c.length-1;f>=0;f--)c[f].innerHTML=I;for(f=d.length-1;f>=0;f--)d[f].innerHTML=H;e.addEventListener("click",b),P("teardown-screen","add-product-confirmation",function(){e.removeEventListener("click",b);for(var a=c.length-1;a>=0;a--)c[a].innerHTML="";for(a=d.length-1;a>=0;a--)d[a].innerHTML=""})}function f(){O("setup-screen","do_screen_setup",k)}function g(){B(function(){N("window-resized",null,this)})}function h(){O("window-resized","screen-height-updater",i),O("screens-resized","autoscroller",j)}function i(){for(var a=U.length-1;a>=0&&!(T>a);a--)U[a].style.height=window.innerHeight+"px";N("screens-resized",null,this)}function j(){V(U[T].offsetTop,150)}function k(){var a=U[T],b=a.id.replace(/\-/g,"_");P("setup-complete","scroll_screen_into_view",function(){V(a.offsetTop)}),D(a,"focal"),P("teardown-screen","defocalizer",function(){E(a,"focal")}),S[b](a),N("setup-complete",null,"do_screen_setup")}function l(a){N("teardown-screen",null,this),T=a,N("setup-screen",null,this)}function m(){l(T+1)}function n(a){for(var b=0,c=0;c<R.length;c++)C(R[c],a)&&(D(R[c],"active"),U.push(R[c]),b+=1);b>0&&i()}function o(a){for(var b=0,c=R.length-1;c>=0;c--)C(R[c],a)&&(E(R[c],"active"),U.splice(c,1),b+=1),b>0&&i()}function p(){for(var a=0;a<R.length;a++)E(R[a],"active");U=[],n("landing"),n("tasks")}function q(){var a=function(){clearInterval(K.heartbeat),delete K.heartbeat};K.heartbeat=setInterval(L.check,7500),P("network-down","heartbeat",a,null)}function r(){var a=document.getElementsByClassName("connection-indicator");K.checkingLightFlickerInterval=setInterval(function(){for(var b=a.length-1;b>=0;b--)D(a[b],"connection-checking"),setTimeout(function(){var c=b;return function(){E(a[c],"connection-checking")}}(),350)},2e3),P("network-reconnecting-exit","light-flicker",function(){clearInterval(K.checkingLightFlickerInterval)},null)}function s(){E(document.body,"connection-offline"),D(document.body,"connection-online")}function t(){E(document.body,"connection-online"),D(document.body,"connection-offline")}function u(){return L.check(),L.state}function v(){L.on("up",function(){N("network-up",null,"connection-watchdog")}),L.on("down",function(){N("network-down",null,"connection-watchdog")}),L.on("reconnect:started",function(){N("network-reconnecting",null,"connection-watchdog")}),L.on("reconnect:stopped",function(){N("network-reconnecting-exit",null,"connection-watchdog")})}function w(){O("network-up","online-indicator",s),O("network-up","heartbeat",q),O("network-down","online-indicator",t),O("network-reconnecting","light-flicker",r)}function x(){window.applicationCache&&(window.applicationCache.addEventListener("downloading",z),window.applicationCache.addEventListener("updateready",y))}function y(){alert("App Has Been Updated and will Restart Now"),window.applicationCache.swapCache(),location.reload(!0)}function z(){alert("Downloading App Updates - Sorry for the Wait")}function A(a,b,c,d){O(a,b,function(){c(),Q(a,b)},d)}function B(a,b){return onresize=function(){clearTimeout(b),b=setTimeout(a,250)},a}function C(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function D(a,b){C(a,b)||(a.className+=" "+b)}function E(a,b){if(C(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}function F(a,b,c,d){if(!a)return!1;var e=new XMLHttpRequest;return b=b||"",c=c||function(b){console.log("POST TO "+a+" SUCCESSFUL! \nRESPONSE: "),console.log(b)},d=d||function(b){console.log("POST TO "+a+" UNSUCCESSFUL. \nXMLHTTP OBJECT:"),console.log(b)},e.open("POST",a,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&(e.status>199&&e.status<400?c(e.responseText):d(e))},e.send(b),!0}function G(){var a=document.getElementById("context-settings"),b="<div id='cancel-task' class='setting'>cancel task</div>";a.innerHTML+=b,P("task-ended","remove-cancel-task-btn",function(){var a=document.getElementById("cancel-task");a.parentNode.removeChild(a)}),document.getElementById("cancel-task").addEventListener("click",function(){N("task-ended","cancel-task-btn")})}var H,I,J,K={},L=Offline,M=dxmPubSub,N=M.publish,O=M.subscribe,P=A,Q=M.unsubscribe,R=document.getElementsByClassName("fullscreen"),S={},T=0,U=[];S.landing=b,S.tasks=c,S.add_product_metadata=d,S.add_product_confirmation=e,L.options={checkOnLoad:!0,interceptRequests:!1,requests:!1,checks:{active:"xhr",xhr:{url:"server-check.php"}}};var V=function(){var a,b,c;return function(d,e){function f(){var d;c=(Date.now()-b)/e,c>=1&&(clearInterval(a),c=1),d=c*h+g,window.scrollBy(0,d-window.pageYOffset)}var g=window.pageYOffset,h=d-window.pageYOffset;return e=e||400,b=Date.now(),c=0,a&&clearInterval(a),a=setInterval(f,10)}}();document.addEventListener("DOMContentLoaded",function(){a(),ASE=U})}();